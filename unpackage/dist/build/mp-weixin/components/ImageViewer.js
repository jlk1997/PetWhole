"use strict";const e=require("../common/vendor.js"),t={props:{show:{type:Boolean,default:!1},images:{type:Array,default:()=>[]},initialIndex:{type:Number,default:0}},data:()=>({currentIndex:0}),watch:{initialIndex(e){this.currentIndex=e},show(e){e&&(this.currentIndex=this.initialIndex)}},methods:{handleSwiperChange(e){this.currentIndex=e.detail.current},close(){this.$emit("close")},formatImageUrl(t){if(!t)return"/static/images/default-image.png";if(console.log("图片查看器处理URL:",t),t.startsWith("http")||t.startsWith("/static")||t.startsWith("blob:"))return t;if(t.startsWith("/uploads")){const n=e.index.getStorageSync("BASE_URL")||"http://49.235.65.37:5000",r=n+t;return console.log("处理相对路径图片URL:",t,"补充基础URL:",n,"完整URL:",r),r}return console.warn("未能识别的图片URL格式:",t),"/static/images/default-image.png"}}};const n=e._export_sfc(t,[["render",function(t,n,r,s,o,a){return e.e({a:r.show},r.show?{b:e.f(r.images,((t,n,r)=>({a:a.formatImageUrl(t),b:e.o(((...e)=>a.close&&a.close(...e)),n),c:e.o(((...e)=>a.close&&a.close(...e)),n),d:n}))),c:o.currentIndex,d:e.o(((...e)=>a.handleSwiperChange&&a.handleSwiperChange(...e))),e:e.o((()=>{})),f:e.t(o.currentIndex+1),g:e.t(r.images.length),h:e.o(((...e)=>a.close&&a.close(...e))),i:e.o(((...e)=>a.close&&a.close(...e)))}:{})}],["__scopeId","data-v-7f770a96"]]);wx.createComponent(n);
