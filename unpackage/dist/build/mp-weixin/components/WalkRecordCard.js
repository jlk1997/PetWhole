"use strict";const t=require("../common/vendor.js"),e={name:"WalkRecordCard",props:{record:{type:Object,required:!0}},methods:{formatDuration(t){if(!t)return"0秒";const e=Math.floor(t/3600),r=Math.floor(t%3600/60);return e>0?`${e}小时${r>0?r+"分钟":""}`:r>0?`${r}分钟`:`${t%60}秒`},formatDurationShort(t){if(!t)return"0秒";const e=Math.floor(t/3600),r=Math.floor(t%3600/60);return e>0?`${e}时${r}分`:r>0?`${r}分钟`:`${t}秒`},formatDate(t){if(!t)return"";try{const e=new Date(t),r=e.getMonth()+1;return`${r}月${e.getDate()}日`}catch(e){return console.error("日期格式化错误:",e),""}},formatPetAvatar(e){if(!e)return"/static/images/default-pet.png";if(e.startsWith("http")||e.startsWith("/static"))return e;if(e.startsWith("/uploads")){return(t.index.getStorageSync("BASE_URL")||"http://49.235.65.37:5000")+e}return"/static/images/default-pet.png"},getRouteImage(){return this.record.routeImage?this.record.routeImage:"/static/images/default-map.png"},viewDetail(){if(!this.record||!this.record._id)return void t.index.showToast({title:"遛狗记录不存在",icon:"none"});this.record._id.startsWith("generated_")?t.index.showToast({title:"这是从动态内容解析的遛狗记录，无法查看详情",icon:"none",duration:2500}):t.index.navigateTo({url:`/pages/walk/detail?id=${this.record._id}`,fail:e=>{console.error("打开遛狗记录详情失败:",e),t.index.showToast({title:"无法查看遛狗记录",icon:"none"})}})}}};const r=t._export_sfc(e,[["render",function(e,r,o,a,i,n){return t.e({a:t.t((o.record.distance/1e3).toFixed(2)),b:t.t(n.formatDurationShort(o.record.duration)),c:o.record.pet},o.record.pet?{d:n.formatPetAvatar(o.record.pet.avatar),e:t.t(o.record.pet?o.record.pet.name:"未命名宠物"),f:t.t(n.formatDate(o.record.startTime))}:{},{g:o.record.route&&o.record.route.length>0},o.record.route&&o.record.route.length>0?{h:n.getRouteImage()}:{},{i:t.o(((...t)=>n.viewDetail&&n.viewDetail(...t)))})}],["__scopeId","data-v-810d7c41"]]);wx.createComponent(r);
