<view class="ai-medical-container"><view class="nav-bar"><view class="back-btn" bindtap="{{a}}"><text class="icon">←</text></view><text class="title">AI宠物医疗助手</text></view><view wx:if="{{b}}" class="service-selector"><view class="selector-title">选择服务类型</view><scroll-view class="service-list" scroll-x="true"><view wx:for="{{c}}" wx:for-item="service" wx:key="b" class="{{['service-item', service.c && 'active']}}" bindtap="{{service.d}}"><text>{{service.a}}</text></view></scroll-view></view><view wx:if="{{d}}" class="pet-info-form"><view class="form-title">填写{{e}}所需信息</view><block wx:if="{{f}}"><view class="form-item"><text class="form-label">宠物昵称</text><input type="text" placeholder="请输入宠物昵称" value="{{g}}" bindinput="{{h}}"/></view><view class="form-item"><text class="form-label">宠物类型</text><picker bindchange="{{j}}" value="{{k}}" range="{{l}}"><view class="picker-value">{{i}}</view></picker></view><view class="form-item"><text class="form-label">出生日期</text><picker mode="date" value="{{n}}" bindchange="{{o}}"><view class="picker-value">{{m}}</view></picker></view><view class="form-item"><text class="form-label">性别</text><picker bindchange="{{q}}" value="{{r}}" range="{{s}}"><view class="picker-value">{{p}}</view></picker></view><view class="form-item"><text class="form-label">生育状态</text><picker bindchange="{{v}}" value="{{w}}" range="{{x}}"><view class="picker-value">{{t}}</view></picker></view></block><block wx:if="{{y}}"><view class="form-item"><text class="form-label">上传图片</text><view class="image-upload-area" bindtap="{{B}}"><image wx:if="{{z}}" src="{{A}}" mode="aspectFit" class="preview-image"></image><view wx:else class="upload-placeholder"><text class="upload-icon">+</text><text class="upload-text">点击上传图片</text></view></view></view><view wx:if="{{C}}" class="form-item"><text class="form-label">或输入图片URL</text><input type="text" placeholder="https://example.com/image.jpg" value="{{D}}" bindinput="{{E}}"/><view wx:if="{{F}}" class="url-preview-btn" bindtap="{{G}}">预览</view></view></block><view class="start-chat-btn" bindtap="{{I}}"><text>开始{{H}}</text></view></view><view wx:if="{{J}}" class="chat-interface"><scroll-view class="chat-container" scroll-y="true" scroll-top="{{L}}" bindscrolltoupper="{{M}}"><view class="chat-messages"><view wx:for="{{K}}" wx:for-item="message" wx:key="d" class="{{['message-item', message.e]}}"><image wx:if="{{message.a}}" src="{{message.b}}" mode="widthFix" class="message-image"></image><view class="message-content"><text>{{message.c}}</text></view></view></view></scroll-view><view class="input-area"><view class="input-box"><input type="text" placeholder="请输入您的问题..." bindconfirm="{{N}}" disabled="{{O}}" value="{{P}}" bindinput="{{Q}}"/><view bindtap="{{S}}" class="{{['send-btn', T && 'disabled']}}"><text class="icon">{{R}}</text></view><view wx:if="{{U}}" class="upload-btn" bindtap="{{V}}"><text class="icon">📷</text></view></view></view></view><canvas canvas-id="imageCanvas" style="position:absolute;left:-1000px;top:-1000px;width:100px;height:100px"></canvas></view>