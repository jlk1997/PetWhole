import{r as m,c as te,a as oe,v as se,A as ue,b,d as p,e,t as ne,w as a,g as s,u as re,D as de,o as c,p as d,J as ie,i as D,F as H,h as I,k as j,V as O,s as V}from"./index-BZUGXbIj.js";import{_ as pe}from"./_plugin-vue_export-helper-DlAUqK2U.js";const me={class:"merchant-edit-container"},ve={class:"page-header"},ce={class:"page-header-actions"},fe={class:"map-container"},ge={class:"map-placeholder"},_e={class:"map-coordinates"},be=["src"],Ve=["src"],ye={__name:"edit",setup(we){const P=oe(),T=re(),q=m(null),y=m(!1),w=m(!1),U=m(!1),B=m(""),g=m(""),h=m([]),k=te(()=>P.params.id!==void 0),E=[{value:"pet_hospital",label:"宠物医院"},{value:"pet_shop",label:"宠物商店"},{value:"pet_service",label:"宠物服务"},{value:"pet_beauty",label:"宠物美容"},{value:"pet_training",label:"宠物训练"},{value:"pet_hotel",label:"宠物酒店"},{value:"pet_park",label:"宠物公园"},{value:"cafe",label:"宠物友好咖啡厅"},{value:"restaurant",label:"宠物友好餐厅"},{value:"others",label:"其他"}],F=[{value:"北京市",label:"北京市",children:[{value:"朝阳区",label:"朝阳区"},{value:"海淀区",label:"海淀区"},{value:"东城区",label:"东城区"},{value:"西城区",label:"西城区"},{value:"丰台区",label:"丰台区"}]},{value:"上海市",label:"上海市",children:[{value:"浦东新区",label:"浦东新区"},{value:"静安区",label:"静安区"},{value:"黄浦区",label:"黄浦区"},{value:"徐汇区",label:"徐汇区"}]}],N=[{value:"宠物医疗",label:"宠物医疗"},{value:"宠物美容",label:"宠物美容"},{value:"宠物训练",label:"宠物训练"},{value:"宠物寄养",label:"宠物寄养"},{value:"宠物用品",label:"宠物用品"},{value:"宠物食品",label:"宠物食品"},{value:"宠物摄影",label:"宠物摄影"},{value:"宠物配种",label:"宠物配种"},{value:"宠物活动",label:"宠物活动"},{value:"其他服务",label:"其他服务"}],o=se({name:"",type:"",contactPerson:"",contactPhone:"",email:"",businessHours:"",area:[],address:"",latitude:"",longitude:"",description:"",services:[],status:"pending",verified:!1,logo:null,images:[]}),$={name:[{required:!0,message:"请输入商家名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择商家类型",trigger:"change"}],contactPerson:[{required:!0,message:"请输入联系人姓名",trigger:"blur"}],contactPhone:[{required:!0,message:"请输入联系电话",trigger:"blur"},{pattern:/^1[3-9]\d{9}$/,message:"请输入正确的手机号码",trigger:"blur"}],email:[{required:!0,message:"请输入电子邮箱",trigger:"blur"},{type:"email",message:"请输入正确的邮箱地址",trigger:"blur"}],area:[{required:!0,message:"请选择所在区域",trigger:"change"}],address:[{required:!0,message:"请输入详细地址",trigger:"blur"}],description:[{required:!0,message:"请输入商家简介",trigger:"blur"}]};ue(()=>{k.value&&z()});const z=()=>{P.params.id,y.value=!0,setTimeout(()=>{Object.assign(o,{name:"爱心宠物诊所",type:"pet_hospital",contactPerson:"张医生",contactPhone:"13800138000",email:"aixin@example.com",businessHours:"9:00-21:00",area:["北京市","朝阳区"],address:"朝阳区建国路88号",latitude:"39.9219",longitude:"116.4551",description:"专业宠物医院，提供全方位的宠物医疗和保健服务。拥有先进的医疗设备和经验丰富的兽医团队。",services:["宠物医疗","宠物美容","宠物寄养"],status:"active",verified:!0}),g.value="https://img.icons8.com/color/96/000000/veterinarian.png",h.value=[{name:"image1.jpg",url:"https://images.unsplash.com/photo-1516734212186-a967f81ad0d7"},{name:"image2.jpg",url:"https://images.unsplash.com/photo-1582486225544-ac37bc196434"}],y.value=!1},500)},A=r=>{if(r.raw.size/1024/1024>2){V.error("Logo图片大小不能超过2MB");return}g.value=URL.createObjectURL(r.raw),o.logo=r.raw},J=r=>{if(r.raw.size/1024/1024>5){V.error("图片大小不能超过5MB");return}o.images.push(r.raw)},S=r=>{const l=h.value.findIndex(f=>f.uid===r.uid);l!==-1&&(h.value.splice(l,1),o.images=o.images.filter((f,v)=>v!==l))},G=r=>{B.value=r.url,U.value=!0},K=()=>{q.value.validate(async r=>{if(!r)return V.error("请填写完整表单信息");w.value=!0,setTimeout(()=>{V.success(k.value?"商家信息更新成功":"商家添加成功"),w.value=!1,T.push("/merchants/list")},1e3)})};return(r,l)=>{const f=s("el-button"),v=s("el-divider"),i=s("el-input"),u=s("el-form-item"),n=s("el-col"),L=s("el-option"),M=s("el-select"),_=s("el-row"),Q=s("el-cascader"),W=s("el-empty"),x=s("el-radio"),X=s("el-radio-group"),Y=s("el-switch"),R=s("el-icon"),C=s("el-upload"),Z=s("el-form"),ee=s("el-card"),le=s("el-dialog"),ae=de("loading");return c(),b("div",me,[p("div",ve,[p("h2",null,ne(k.value?"编辑商家":"添加商家"),1),p("div",ce,[e(f,{onClick:l[0]||(l[0]=t=>r.$router.back())},{default:a(()=>l[16]||(l[16]=[d("返回")])),_:1}),e(f,{type:"primary",onClick:K,loading:w.value},{default:a(()=>l[17]||(l[17]=[d("保存")])),_:1},8,["loading"])])]),e(ee,{shadow:"hover",class:"edit-card"},{default:a(()=>[ie((c(),D(Z,{ref_key:"formRef",ref:q,model:o,rules:$,"label-width":"120px","label-position":"right"},{default:a(()=>[e(v,{"content-position":"left"},{default:a(()=>l[18]||(l[18]=[d("基本信息")])),_:1}),e(_,{gutter:20},{default:a(()=>[e(n,{span:12},{default:a(()=>[e(u,{label:"商家名称",prop:"name"},{default:a(()=>[e(i,{modelValue:o.name,"onUpdate:modelValue":l[1]||(l[1]=t=>o.name=t),placeholder:"请输入商家名称"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:a(()=>[e(u,{label:"商家类型",prop:"type"},{default:a(()=>[e(M,{modelValue:o.type,"onUpdate:modelValue":l[2]||(l[2]=t=>o.type=t),placeholder:"请选择商家类型",style:{width:"100%"}},{default:a(()=>[(c(),b(H,null,I(E,t=>e(L,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:a(()=>[e(u,{label:"联系人",prop:"contactPerson"},{default:a(()=>[e(i,{modelValue:o.contactPerson,"onUpdate:modelValue":l[3]||(l[3]=t=>o.contactPerson=t),placeholder:"请输入联系人姓名"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:a(()=>[e(u,{label:"联系电话",prop:"contactPhone"},{default:a(()=>[e(i,{modelValue:o.contactPhone,"onUpdate:modelValue":l[4]||(l[4]=t=>o.contactPhone=t),placeholder:"请输入联系电话"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:a(()=>[e(u,{label:"电子邮箱",prop:"email"},{default:a(()=>[e(i,{modelValue:o.email,"onUpdate:modelValue":l[5]||(l[5]=t=>o.email=t),placeholder:"请输入电子邮箱"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:a(()=>[e(u,{label:"营业时间",prop:"businessHours"},{default:a(()=>[e(i,{modelValue:o.businessHours,"onUpdate:modelValue":l[6]||(l[6]=t=>o.businessHours=t),placeholder:"例如: 9:00-21:00"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{"content-position":"left"},{default:a(()=>l[19]||(l[19]=[d("位置信息")])),_:1}),e(_,{gutter:20},{default:a(()=>[e(n,{span:12},{default:a(()=>[e(u,{label:"所在区域",prop:"area"},{default:a(()=>[e(Q,{modelValue:o.area,"onUpdate:modelValue":l[7]||(l[7]=t=>o.area=t),options:F,placeholder:"请选择所在区域",style:{width:"100%"},clearable:""},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:12},{default:a(()=>[e(u,{label:"详细地址",prop:"address"},{default:a(()=>[e(i,{modelValue:o.address,"onUpdate:modelValue":l[8]||(l[8]=t=>o.address=t),placeholder:"请输入详细地址"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:a(()=>[e(u,{label:"地图位置"},{default:a(()=>[p("div",fe,[p("div",ge,[e(W,{description:"地图加载中..."})])]),p("div",_e,[e(i,{modelValue:o.latitude,"onUpdate:modelValue":l[9]||(l[9]=t=>o.latitude=t),placeholder:"纬度",class:"coordinate-input"},{prepend:a(()=>l[20]||(l[20]=[d("纬度")])),_:1},8,["modelValue"]),e(i,{modelValue:o.longitude,"onUpdate:modelValue":l[10]||(l[10]=t=>o.longitude=t),placeholder:"经度",class:"coordinate-input"},{prepend:a(()=>l[21]||(l[21]=[d("经度")])),_:1},8,["modelValue"])])]),_:1})]),_:1})]),_:1}),e(v,{"content-position":"left"},{default:a(()=>l[22]||(l[22]=[d("商家信息")])),_:1}),e(_,{gutter:20},{default:a(()=>[e(n,{span:24},{default:a(()=>[e(u,{label:"商家简介",prop:"description"},{default:a(()=>[e(i,{modelValue:o.description,"onUpdate:modelValue":l[11]||(l[11]=t=>o.description=t),type:"textarea",rows:"4",placeholder:"请输入商家简介"},null,8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:a(()=>[e(u,{label:"提供服务",prop:"services"},{default:a(()=>[e(M,{modelValue:o.services,"onUpdate:modelValue":l[12]||(l[12]=t=>o.services=t),multiple:"","collapse-tags":"","collapse-tags-tooltip":"",placeholder:"请选择提供的服务",style:{width:"100%"}},{default:a(()=>[(c(),b(H,null,I(N,t=>e(L,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:a(()=>[e(u,{label:"状态",prop:"status"},{default:a(()=>[e(X,{modelValue:o.status,"onUpdate:modelValue":l[13]||(l[13]=t=>o.status=t)},{default:a(()=>[e(x,{value:"active"},{default:a(()=>l[23]||(l[23]=[d("正常")])),_:1}),e(x,{value:"pending"},{default:a(()=>l[24]||(l[24]=[d("待审核")])),_:1}),e(x,{value:"disabled"},{default:a(()=>l[25]||(l[25]=[d("禁用")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1}),e(n,{span:24},{default:a(()=>[e(u,{label:"认证状态"},{default:a(()=>[e(Y,{modelValue:o.verified,"onUpdate:modelValue":l[14]||(l[14]=t=>o.verified=t),"active-text":"已认证","inactive-text":"未认证"},null,8,["modelValue"])]),_:1})]),_:1})]),_:1}),e(v,{"content-position":"left"},{default:a(()=>l[26]||(l[26]=[d("图片信息")])),_:1}),e(_,{gutter:20},{default:a(()=>[e(n,{span:24},{default:a(()=>[e(u,{label:"Logo上传"},{default:a(()=>[e(C,{class:"avatar-uploader",action:"#","auto-upload":!1,"show-file-list":!1,"on-change":A},{default:a(()=>[g.value?(c(),b("img",{key:0,src:g.value,class:"avatar"},null,8,be)):(c(),D(R,{key:1,class:"avatar-uploader-icon"},{default:a(()=>[e(j(O))]),_:1}))]),_:1}),l[27]||(l[27]=p("div",{class:"upload-tip"},"建议上传正方形图片，大小不超过2MB",-1))]),_:1})]),_:1}),e(n,{span:24},{default:a(()=>[e(u,{label:"商家图片"},{default:a(()=>[e(C,{class:"image-uploader",action:"#","auto-upload":!1,"list-type":"picture-card","on-change":J,"on-remove":S,"on-preview":G},{default:a(()=>[e(R,null,{default:a(()=>[e(j(O))]),_:1})]),_:1}),l[28]||(l[28]=p("div",{class:"upload-tip"}," 可上传多张图片展示商家环境，每张大小不超过5MB ",-1))]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])),[[ae,y.value]])]),_:1}),e(le,{modelValue:U.value,"onUpdate:modelValue":l[15]||(l[15]=t=>U.value=t),title:"图片预览"},{default:a(()=>[p("img",{src:B.value,alt:"商家图片预览",style:{width:"100%"}},null,8,Ve)]),_:1},8,["modelValue"])])}}},ke=pe(ye,[["__scopeId","data-v-e2a6c6d0"]]);export{ke as default};
