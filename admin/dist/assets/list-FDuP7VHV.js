import{_ as re}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as v,v as E,c as se,A as de,b as B,d as y,e as t,w as a,g as i,D as ue,o as b,p as u,F,h as O,J as ie,i as h,t as T,f as R,E as D,s as x}from"./index-BZUGXbIj.js";const pe={class:"markers-container"},me={class:"page-header"},ce={class:"page-header-actions"},fe={class:"pagination-container"},ve={class:"coordinate-inputs"},ge={class:"dialog-footer"},ye={__name:"list",setup(be){const N=v(!1),g=v(!1),f=v(1),_=v(10),w=v(0),M=v(null),q={name:[{required:!0,message:"请输入标记名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择标记类型",trigger:"change"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}]},d=E({name:"",type:"",status:"",creator:""}),n=E({id:"",name:"",type:"",typeName:"",address:"",latitude:"",longitude:"",description:"",status:"pending",creator:"",createTime:""}),V=[{value:"park",label:"公园",color:"success"},{value:"hospital",label:"宠物医院",color:"danger"},{value:"shop",label:"宠物商店",color:"warning"},{value:"restaurant",label:"宠物友好餐厅",color:"info"},{value:"hotel",label:"宠物酒店",color:"primary"},{value:"toilet",label:"宠物厕所",color:""},{value:"training",label:"训练中心",color:"success"},{value:"beauty",label:"美容中心",color:"warning"}],m=v([{id:1,name:"中央公园宠物区",type:"park",typeName:"公园",address:"北京市朝阳区中央公园5号门",latitude:"39.9219",longitude:"116.4551",description:"宠物专属游乐区，设有专门的休息区和饮水设施。周末有宠物社交活动。",status:"approved",creator:"张三",createTime:"2023-10-15 09:30:22"},{id:2,name:"爱心宠物医院",type:"hospital",typeName:"宠物医院",address:"北京市海淀区学院路28号",latitude:"39.9631",longitude:"116.3586",description:"24小时营业的宠物医院，配有先进的医疗设备和经验丰富的兽医团队。",status:"approved",creator:"李四",createTime:"2023-10-16 14:25:18"},{id:3,name:"萌宠用品商城",type:"shop",typeName:"宠物商店",address:"北京市西城区西单北大街103号",latitude:"39.9127",longitude:"116.3675",description:"提供各类高质量的宠物用品，包括食品、玩具、服装等。",status:"pending",creator:"王五",createTime:"2023-10-17 11:12:36"},{id:4,name:"汪汪咖啡屋",type:"restaurant",typeName:"宠物友好餐厅",address:"北京市朝阳区三里屯太古里北区NLG-47",latitude:"39.9382",longitude:"116.4546",description:"宠物友好咖啡馆，有专门的宠物菜单和宠物活动区域。",status:"approved",creator:"赵六",createTime:"2023-10-18 16:45:10"},{id:5,name:"宠悦精品酒店",type:"hotel",typeName:"宠物酒店",address:"北京市东城区东直门外大街42号",latitude:"39.9406",longitude:"116.4373",description:"高档宠物寄养酒店，提供24小时监控和专业护理服务。",status:"rejected",creator:"钱七",createTime:"2023-10-19 10:30:55"},{id:6,name:"森林公园宠物厕所",type:"toilet",typeName:"宠物厕所",address:"北京市海淀区颐和园路5号",latitude:"40.0046",longitude:"116.3077",description:"宠物专用厕所，配有冲洗设施和废物处理设备。",status:"pending",creator:"孙八",createTime:"2023-10-20 09:15:48"}]),L=se(()=>{let o=m.value;d.name&&(o=o.filter(s=>s.name.includes(d.name))),d.type&&(o=o.filter(s=>s.type===d.type)),d.status&&(o=o.filter(s=>s.status===d.status)),d.creator&&(o=o.filter(s=>s.creator.includes(d.creator))),w.value=o.length;const e=(f.value-1)*_.value,r=e+_.value;return o.slice(e,r)});de(()=>{A()});const A=()=>{N.value=!0,setTimeout(()=>{w.value=m.value.length,N.value=!1},500)},P=o=>{const e=V.find(r=>r.value===o);return e?e.color:""},G=o=>{switch(o){case"approved":return"success";case"pending":return"warning";case"rejected":return"danger";default:return"info"}},J=o=>{switch(o){case"approved":return"已审核";case"pending":return"待审核";case"rejected":return"已拒绝";default:return"未知"}},k=()=>{f.value=1},H=()=>{d.name="",d.type="",d.status="",d.creator="",f.value=1},K=o=>{_.value=o,f.value=1},Q=o=>{f.value=o},W=o=>{Object.assign(n,o),g.value=!0},X=o=>{D.confirm("确定要审核通过该标记点吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"success"}).then(()=>{const e=m.value.findIndex(r=>r.id===o.id);e!==-1&&(m.value[e].status="approved"),x.success("标记点已审核通过")}).catch(()=>{})},Y=o=>{D.confirm("确定要拒绝该标记点吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=m.value.findIndex(r=>r.id===o.id);e!==-1&&(m.value[e].status="rejected"),x.success("标记点已拒绝")}).catch(()=>{})},Z=o=>{D.confirm("确定要删除该标记点吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=m.value.findIndex(r=>r.id===o.id);e!==-1&&(m.value.splice(e,1),w.value--),x.success("标记点已删除")}).catch(()=>{})},ee=()=>{M.value.validate(o=>{if(!o)return;const e=new Date().toLocaleString();if(n.id){const r=m.value.findIndex(s=>s.id===n.id);if(r!==-1){const s=V.find(p=>p.value===n.type);n.typeName=s?s.label:"",m.value[r]={...n}}x.success("标记点已更新")}else{const r=V.find(s=>s.value===n.type);m.value.push({id:Date.now(),name:n.name,type:n.type,typeName:r?r.label:"",address:n.address,latitude:n.latitude,longitude:n.longitude,description:n.description,status:n.status,creator:"管理员",createTime:e}),x.success("标记点已添加")}w.value=m.value.length,g.value=!1,Object.assign(n,{id:"",name:"",type:"",typeName:"",address:"",latitude:"",longitude:"",description:"",status:"pending",creator:"",createTime:""})})};return(o,e)=>{const r=i("el-button"),s=i("el-input"),p=i("el-form-item"),C=i("el-option"),U=i("el-select"),S=i("el-form"),$=i("el-card"),c=i("el-table-column"),I=i("el-tag"),te=i("el-table"),le=i("el-pagination"),j=i("el-radio"),ae=i("el-radio-group"),oe=i("el-dialog"),ne=ue("loading");return b(),B("div",pe,[y("div",me,[e[19]||(e[19]=y("h2",null,"标记点列表",-1)),y("div",ce,[t(r,{onClick:e[0]||(e[0]=l=>o.$router.push("/markers/map"))},{default:a(()=>e[17]||(e[17]=[u("地图视图")])),_:1}),t(r,{type:"primary",onClick:e[1]||(e[1]=l=>g.value=!0)},{default:a(()=>e[18]||(e[18]=[u("添加标记")])),_:1})])]),t($,{shadow:"hover",class:"filter-card"},{default:a(()=>[t(S,{inline:!0,model:d,class:"filter-form"},{default:a(()=>[t(p,{label:"标记名称"},{default:a(()=>[t(s,{modelValue:d.name,"onUpdate:modelValue":e[2]||(e[2]=l=>d.name=l),placeholder:"输入标记名称",clearable:"",onClear:k},null,8,["modelValue"])]),_:1}),t(p,{label:"标记类型"},{default:a(()=>[t(U,{modelValue:d.type,"onUpdate:modelValue":e[3]||(e[3]=l=>d.type=l),placeholder:"选择标记类型",clearable:"",onChange:k},{default:a(()=>[(b(),B(F,null,O(V,l=>t(C,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"状态"},{default:a(()=>[t(U,{modelValue:d.status,"onUpdate:modelValue":e[4]||(e[4]=l=>d.status=l),placeholder:"选择状态",clearable:"",onChange:k},{default:a(()=>[t(C,{label:"已审核",value:"approved"}),t(C,{label:"待审核",value:"pending"}),t(C,{label:"已拒绝",value:"rejected"})]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"创建者"},{default:a(()=>[t(s,{modelValue:d.creator,"onUpdate:modelValue":e[5]||(e[5]=l=>d.creator=l),placeholder:"输入创建者",clearable:"",onClear:k},null,8,["modelValue"])]),_:1}),t(p,null,{default:a(()=>[t(r,{type:"primary",onClick:k},{default:a(()=>e[20]||(e[20]=[u("查询")])),_:1}),t(r,{onClick:H},{default:a(()=>e[21]||(e[21]=[u("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t($,{shadow:"hover",class:"markers-card"},{default:a(()=>[ie((b(),h(te,{data:L.value,style:{width:"100%"}},{default:a(()=>[t(c,{prop:"id",label:"ID",width:"80"}),t(c,{prop:"name",label:"标记名称","min-width":"150"}),t(c,{prop:"typeName",label:"类型",width:"120"},{default:a(l=>[t(I,{type:P(l.row.type)},{default:a(()=>[u(T(l.row.typeName),1)]),_:2},1032,["type"])]),_:1}),t(c,{prop:"address",label:"地址","min-width":"200","show-overflow-tooltip":""}),t(c,{label:"坐标",width:"180"},{default:a(l=>[u(T(l.row.latitude)+", "+T(l.row.longitude),1)]),_:1}),t(c,{prop:"creator",label:"创建者",width:"120"}),t(c,{prop:"createTime",label:"创建时间",width:"180"}),t(c,{label:"状态",width:"100"},{default:a(l=>[t(I,{type:G(l.row.status)},{default:a(()=>[u(T(J(l.row.status)),1)]),_:2},1032,["type"])]),_:1}),t(c,{label:"操作",width:"250",fixed:"right"},{default:a(l=>[t(r,{size:"small",type:"primary",onClick:z=>W(l.row)},{default:a(()=>e[22]||(e[22]=[u("编辑")])),_:2},1032,["onClick"]),l.row.status==="pending"?(b(),h(r,{key:0,size:"small",type:"success",onClick:z=>X(l.row)},{default:a(()=>e[23]||(e[23]=[u("审核通过")])),_:2},1032,["onClick"])):R("",!0),l.row.status==="pending"?(b(),h(r,{key:1,size:"small",type:"warning",onClick:z=>Y(l.row)},{default:a(()=>e[24]||(e[24]=[u("拒绝")])),_:2},1032,["onClick"])):R("",!0),t(r,{size:"small",type:"danger",onClick:z=>Z(l.row)},{default:a(()=>e[25]||(e[25]=[u("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[ne,N.value]]),y("div",fe,[t(le,{"current-page":f.value,"onUpdate:currentPage":e[6]||(e[6]=l=>f.value=l),"page-size":_.value,"onUpdate:pageSize":e[7]||(e[7]=l=>_.value=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:w.value,onSizeChange:K,onCurrentChange:Q},null,8,["current-page","page-size","total"])])]),_:1}),t(oe,{modelValue:g.value,"onUpdate:modelValue":e[16]||(e[16]=l=>g.value=l),title:n.id?"编辑标记":"添加标记",width:"600px","destroy-on-close":""},{footer:a(()=>[y("span",ge,[t(r,{onClick:e[15]||(e[15]=l=>g.value=!1)},{default:a(()=>e[31]||(e[31]=[u("取消")])),_:1}),t(r,{type:"primary",onClick:ee},{default:a(()=>e[32]||(e[32]=[u("确定")])),_:1})])]),default:a(()=>[t(S,{ref_key:"formRef",ref:M,model:n,rules:q,"label-width":"100px"},{default:a(()=>[t(p,{label:"标记名称",prop:"name"},{default:a(()=>[t(s,{modelValue:n.name,"onUpdate:modelValue":e[8]||(e[8]=l=>n.name=l),placeholder:"请输入标记名称"},null,8,["modelValue"])]),_:1}),t(p,{label:"标记类型",prop:"type"},{default:a(()=>[t(U,{modelValue:n.type,"onUpdate:modelValue":e[9]||(e[9]=l=>n.type=l),placeholder:"请选择标记类型",style:{width:"100%"}},{default:a(()=>[(b(),B(F,null,O(V,l=>t(C,{key:l.value,label:l.label,value:l.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),t(p,{label:"地址",prop:"address"},{default:a(()=>[t(s,{modelValue:n.address,"onUpdate:modelValue":e[10]||(e[10]=l=>n.address=l),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1}),t(p,{label:"坐标"},{default:a(()=>[y("div",ve,[t(s,{modelValue:n.latitude,"onUpdate:modelValue":e[11]||(e[11]=l=>n.latitude=l),placeholder:"纬度",class:"coordinate-input"},{prepend:a(()=>e[26]||(e[26]=[u("纬度")])),_:1},8,["modelValue"]),t(s,{modelValue:n.longitude,"onUpdate:modelValue":e[12]||(e[12]=l=>n.longitude=l),placeholder:"经度",class:"coordinate-input"},{prepend:a(()=>e[27]||(e[27]=[u("经度")])),_:1},8,["modelValue"])])]),_:1}),t(p,{label:"描述",prop:"description"},{default:a(()=>[t(s,{modelValue:n.description,"onUpdate:modelValue":e[13]||(e[13]=l=>n.description=l),type:"textarea",rows:3,placeholder:"请输入标记描述"},null,8,["modelValue"])]),_:1}),t(p,{label:"状态",prop:"status"},{default:a(()=>[t(ae,{modelValue:n.status,"onUpdate:modelValue":e[14]||(e[14]=l=>n.status=l)},{default:a(()=>[t(j,{value:"approved"},{default:a(()=>e[28]||(e[28]=[u("已审核")])),_:1}),t(j,{value:"pending"},{default:a(()=>e[29]||(e[29]=[u("待审核")])),_:1}),t(j,{value:"rejected"},{default:a(()=>e[30]||(e[30]=[u("已拒绝")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ve=re(ye,[["__scopeId","data-v-2eb409be"]]);export{Ve as default};
