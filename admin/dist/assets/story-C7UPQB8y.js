import{a}from"./index-xsH4HHeE.js";import{s,E as u}from"./index-BZUGXbIj.js";const r=a.create({baseURL:"",timeout:15e3});r.interceptors.request.use(e=>{const t=localStorage.getItem("token");return t&&(e.headers.Authorization=`Bearer ${t}`),e},e=>(console.error("请求错误:",e),Promise.reject(e)));r.interceptors.response.use(e=>{const t=e.data;return t.code!==0&&t.code!==void 0?(s({message:t.message||"错误",type:"error",duration:5*1e3}),t.code===401&&u.confirm("登录状态已过期，请重新登录","确认退出",{confirmButtonText:"重新登录",cancelButtonText:"取消",type:"warning"}).then(()=>{localStorage.removeItem("token"),location.reload()}),Promise.reject(new Error(t.message||"错误"))):t},e=>{var t,n;return console.error("响应错误:",e),s({message:((n=(t=e.response)==null?void 0:t.data)==null?void 0:n.message)||e.message||"请求失败",type:"error",duration:5*1e3}),Promise.reject(e)});const o="/api/admin/story";function c(){return r({url:`${o}/plots`,method:"get"})}function m(e){return r({url:`${o}/plots/${e}`,method:"get"})}function p(e){return r({url:`${o}/plots`,method:"post",data:e})}function d(e,t){return r({url:`${o}/plots/${e}`,method:"put",data:t})}function h(e){return r({url:`${o}/plots/${e}`,method:"delete"})}function g(e){return r({url:`${o}/chapters/${e}`,method:"get"})}function $(e){return r({url:`${o}/chapters`,method:"post",data:e})}function f(e,t){return r({url:`${o}/chapters/${e}`,method:"put",data:t})}function v(e){return r({url:`${o}/chapters/${e}`,method:"delete"})}function P(e){return r({url:`${o}/events/${e}`,method:"get"})}function E(e){return r({url:`${o}/events`,method:"post",data:e})}function x(e,t){return r({url:`${o}/events/${e}`,method:"put",data:t})}function y(e){return r({url:`${o}/events/${e}`,method:"delete"})}function C(){return r({url:`${o}/progress-stats`,method:"get"})}function S(e){return r({url:`${o}/export/${e}`,method:"get"})}function j(e){return r({url:`${o}/import`,method:"post",data:e})}export{m as a,f as b,p as c,h as d,S as e,$ as f,c as g,v as h,j as i,x as j,E as k,y as l,g as m,P as n,C as o,d as u};
