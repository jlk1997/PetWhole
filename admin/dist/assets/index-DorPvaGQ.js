import{r as _,v as b,b as V,d,e as o,w as s,x as k,g as l,u as R,o as h,k as f,y as N,z as B,p as C,s as g}from"./index-BZUGXbIj.js";import{p as F}from"./index-DMQPIv9t.js";import{_ as I}from"./_plugin-vue_export-helper-DlAUqK2U.js";import"./index-xsH4HHeE.js";const S={class:"login-container"},U={class:"login-card"},q={__name:"index",setup(E){const x=R(),m=_(null),n=_(!1),t=b({username:"admin",password:"123456"}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"},{min:3,max:20,message:"长度在 3 到 20 个字符",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,max:20,message:"长度在 6 到 20 个字符",trigger:"blur"}]},p=()=>{m.value.validate(async c=>{var e,a;if(!c)return!1;n.value=!0;try{const r=await F("/admin/login",t);localStorage.setItem("token",r.token),localStorage.setItem("user",JSON.stringify(r.data)),x.push("/"),g({type:"success",message:"登录成功"})}catch(r){console.error("登录失败:",r),g.error(((a=(e=r.response)==null?void 0:e.data)==null?void 0:a.message)||"登录失败，请检查用户名和密码")}finally{n.value=!1}})};return(c,e)=>{const a=l("el-icon"),r=l("el-input"),u=l("el-form-item"),w=l("el-button"),y=l("el-form");return h(),V("div",S,[d("div",U,[e[3]||(e[3]=d("div",{class:"title"},[d("h2",null,"DogRun管理系统")],-1)),o(y,{ref_key:"loginFormRef",ref:m,model:t,rules:v,class:"login-form",onKeyup:k(p,["enter"])},{default:s(()=>[o(u,{prop:"username"},{default:s(()=>[o(r,{modelValue:t.username,"onUpdate:modelValue":e[0]||(e[0]=i=>t.username=i),placeholder:"用户名","prefix-icon":"User"},{prefix:s(()=>[o(a,null,{default:s(()=>[o(f(N))]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(u,{prop:"password"},{default:s(()=>[o(r,{modelValue:t.password,"onUpdate:modelValue":e[1]||(e[1]=i=>t.password=i),type:"password",placeholder:"密码","show-password":""},{prefix:s(()=>[o(a,null,{default:s(()=>[o(f(B))]),_:1})]),_:1},8,["modelValue"])]),_:1}),o(u,null,{default:s(()=>[o(w,{loading:n.value,type:"primary",class:"login-button",onClick:p},{default:s(()=>e[2]||(e[2]=[C(" 登录 ")])),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])])}}},L=I(q,[["__scopeId","data-v-7dc9ebf2"]]);export{L as default};
