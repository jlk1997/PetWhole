import{_ as ee}from"./_plugin-vue_export-helper-DlAUqK2U.js";import{r as p,v as le,c as te,A as ae,b as c,d,e as l,w as a,g as r,o as v,p as u,F,h as j,f as oe,W as se,t as V,s as h,E as de}from"./index-BZUGXbIj.js";const ne={class:"map-container"},re={class:"page-header"},ue={class:"page-header-actions"},ie={class:"map-controls"},pe={class:"map-filter"},me={class:"map-actions"},ce={class:"map-view"},ve={key:0,class:"map-loading"},fe={key:1,class:"map-error"},ge={key:2,class:"map-content"},ye={key:3,class:"map-legend"},_e={class:"legend-label"},be={class:"card-header"},Ve={class:"coordinate-inputs"},we={class:"dialog-footer"},ke={__name:"map",setup(Ce){const w=p(!1),N=p(!1),g=p(!1),U=p(!0),M=p("standard"),k=p(""),C=p(""),O={name:[{required:!0,message:"请输入标记名称",trigger:"blur"},{min:2,max:50,message:"长度在 2 到 50 个字符",trigger:"blur"}],type:[{required:!0,message:"请选择标记类型",trigger:"change"}],address:[{required:!0,message:"请输入地址",trigger:"blur"}]},T=p(null),o=le({id:"",name:"",type:"",typeName:"",address:"",latitude:"",longitude:"",description:"",status:"pending",creator:""}),_=[{value:"park",label:"公园",color:"#67C23A"},{value:"hospital",label:"宠物医院",color:"#F56C6C"},{value:"shop",label:"宠物商店",color:"#E6A23C"},{value:"restaurant",label:"宠物友好餐厅",color:"#909399"},{value:"hotel",label:"宠物酒店",color:"#409EFF"},{value:"toilet",label:"宠物厕所",color:"#9E6EE8"},{value:"training",label:"训练中心",color:"#FF9900"},{value:"beauty",label:"美容中心",color:"#FF69B4"}],f=p([{id:1,name:"中央公园宠物区",type:"park",typeName:"公园",address:"北京市朝阳区中央公园5号门",latitude:"39.9219",longitude:"116.4551",description:"宠物专属游乐区，设有专门的休息区和饮水设施。周末有宠物社交活动。",status:"approved",creator:"张三"},{id:2,name:"爱心宠物医院",type:"hospital",typeName:"宠物医院",address:"北京市海淀区学院路28号",latitude:"39.9631",longitude:"116.3586",description:"24小时营业的宠物医院，配有先进的医疗设备和经验丰富的兽医团队。",status:"approved",creator:"李四"},{id:3,name:"萌宠用品商城",type:"shop",typeName:"宠物商店",address:"北京市西城区西单北大街103号",latitude:"39.9127",longitude:"116.3675",description:"提供各类高质量的宠物用品，包括食品、玩具、服装等。",status:"pending",creator:"王五"},{id:4,name:"汪汪咖啡屋",type:"restaurant",typeName:"宠物友好餐厅",address:"北京市朝阳区三里屯太古里北区NLG-47",latitude:"39.9382",longitude:"116.4546",description:"宠物友好咖啡馆，有专门的宠物菜单和宠物活动区域。",status:"approved",creator:"赵六"},{id:5,name:"宠悦精品酒店",type:"hotel",typeName:"宠物酒店",address:"北京市东城区东直门外大街42号",latitude:"39.9406",longitude:"116.4373",description:"高档宠物寄养酒店，提供24小时监控和专业护理服务。",status:"rejected",creator:"钱七"},{id:6,name:"森林公园宠物厕所",type:"toilet",typeName:"宠物厕所",address:"北京市海淀区颐和园路5号",latitude:"40.0046",longitude:"116.3077",description:"宠物专用厕所，配有冲洗设施和废物处理设备。",status:"pending",creator:"孙八"}]),R=te(()=>{let s=f.value;return k.value&&(s=s.filter(e=>e.type===k.value)),C.value&&(s=s.filter(e=>e.status===C.value)),s});ae(()=>{B()});const B=()=>{w.value=!0,N.value=!1,setTimeout(()=>{Math.random()>.1?w.value=!1:(w.value=!1,N.value=!0)},1e3)},q=s=>{switch(s){case"approved":return"success";case"pending":return"warning";case"rejected":return"danger";default:return"info"}},A=s=>{switch(s){case"approved":return"已审核";case"pending":return"待审核";case"rejected":return"已拒绝";default:return"未知"}},z=()=>{},S=()=>{B()},L=s=>{Object.assign(o,s),g.value=!0},G=s=>{h.success(`已将地图居中到标记：${s.name}`)},W=s=>{de.confirm("确定要删除该标记点吗？","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=f.value.findIndex(n=>n.id===s.id);e!==-1&&f.value.splice(e,1),h.success("标记点已删除")}).catch(()=>{})},H=()=>{T.value.validate(s=>{if(s){if(o.id){const e=f.value.findIndex(n=>n.id===o.id);if(e!==-1){const n=_.find(i=>i.value===o.type);o.typeName=n?n.label:"",f.value[e]={...o}}h.success("标记点已更新")}else{const e=_.find(n=>n.value===o.type);f.value.push({id:Date.now(),name:o.name,type:o.type,typeName:e?e.label:"",address:o.address,latitude:o.latitude,longitude:o.longitude,description:o.description,status:o.status,creator:"管理员"}),h.success("标记点已添加")}g.value=!1,Object.assign(o,{id:"",name:"",type:"",typeName:"",address:"",latitude:"",longitude:"",description:"",status:"pending",creator:""})}})};return(s,e)=>{const n=r("el-button"),i=r("el-option"),x=r("el-select"),J=r("el-switch"),K=r("el-skeleton"),$=r("el-empty"),D=r("el-card"),m=r("el-table-column"),P=r("el-tag"),Q=r("el-table"),b=r("el-input"),y=r("el-form-item"),E=r("el-radio"),X=r("el-radio-group"),Y=r("el-form"),Z=r("el-dialog");return v(),c("div",ne,[d("div",re,[e[16]||(e[16]=d("h2",null,"地图标记管理",-1)),d("div",ue,[l(n,{type:"primary",onClick:S},{default:a(()=>e[14]||(e[14]=[u("刷新数据")])),_:1}),l(n,{type:"success",onClick:e[0]||(e[0]=t=>g.value=!0)},{default:a(()=>e[15]||(e[15]=[u("添加标记")])),_:1})])]),l(D,{shadow:"hover",class:"map-card"},{default:a(()=>[d("div",ie,[d("div",pe,[l(x,{modelValue:k.value,"onUpdate:modelValue":e[1]||(e[1]=t=>k.value=t),placeholder:"标记类型",clearable:"",onChange:z},{default:a(()=>[(v(),c(F,null,j(_,t=>l(i,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"]),l(x,{modelValue:C.value,"onUpdate:modelValue":e[2]||(e[2]=t=>C.value=t),placeholder:"审核状态",clearable:"",onChange:z},{default:a(()=>[l(i,{label:"已审核",value:"approved"}),l(i,{label:"待审核",value:"pending"}),l(i,{label:"已拒绝",value:"rejected"})]),_:1},8,["modelValue"])]),d("div",me,[l(J,{modelValue:U.value,"onUpdate:modelValue":e[3]||(e[3]=t=>U.value=t),"active-text":"显示图例","inactive-text":""},null,8,["modelValue"]),l(x,{modelValue:M.value,"onUpdate:modelValue":e[4]||(e[4]=t=>M.value=t),placeholder:"地图样式"},{default:a(()=>[l(i,{label:"标准",value:"standard"}),l(i,{label:"卫星",value:"satellite"}),l(i,{label:"黑夜",value:"dark"})]),_:1},8,["modelValue"])])]),d("div",ce,[w.value?(v(),c("div",ve,[l(K,{style:{width:"100%",height:"100%"},animated:""})])):N.value?(v(),c("div",fe,[l($,{description:"地图加载失败","image-size":200},{description:a(()=>e[17]||(e[17]=[d("p",null,"地图加载失败，请检查网络连接",-1)])),default:a(()=>[l(n,{type:"primary",onClick:S},{default:a(()=>e[18]||(e[18]=[u("重试")])),_:1})]),_:1})])):(v(),c("div",ge,[l($,{description:"地图组件占位符","image-size":200},{description:a(()=>e[19]||(e[19]=[d("p",null,"这里将加载实际地图和标记点数据",-1),d("p",null,"目前使用模拟数据进行展示",-1)])),_:1})])),U.value?(v(),c("div",ye,[e[20]||(e[20]=d("h4",null,"图例",-1)),(v(),c(F,null,j(_,t=>d("div",{class:"legend-item",key:t.value},[d("div",{class:"legend-color",style:se({backgroundColor:t.color})},null,4),d("div",_e,V(t.label),1)])),64))])):oe("",!0)])]),_:1}),l(D,{shadow:"hover",class:"markers-list-card"},{header:a(()=>[d("div",be,[e[21]||(e[21]=d("span",null,"标记列表",-1)),d("span",null,"共 "+V(f.value.length)+" 个标记点",1)])]),default:a(()=>[l(Q,{data:R.value,style:{width:"100%"},"max-height":400},{default:a(()=>[l(m,{prop:"id",label:"ID",width:"80"}),l(m,{prop:"name",label:"标记名称","min-width":"150"}),l(m,{prop:"typeName",label:"类型",width:"120"}),l(m,{prop:"address",label:"地址","min-width":"150","show-overflow-tooltip":""}),l(m,{label:"坐标",width:"180"},{default:a(t=>[u(V(t.row.latitude)+", "+V(t.row.longitude),1)]),_:1}),l(m,{prop:"creator",label:"创建者",width:"120"}),l(m,{label:"状态",width:"100"},{default:a(t=>[l(P,{type:q(t.row.status)},{default:a(()=>[u(V(A(t.row.status)),1)]),_:2},1032,["type"])]),_:1}),l(m,{label:"操作",width:"250",fixed:"right"},{default:a(t=>[l(n,{size:"small",type:"primary",onClick:I=>L(t.row)},{default:a(()=>e[22]||(e[22]=[u("编辑")])),_:2},1032,["onClick"]),l(n,{size:"small",type:"success",onClick:I=>G(t.row)},{default:a(()=>e[23]||(e[23]=[u("居中")])),_:2},1032,["onClick"]),l(n,{size:"small",type:"danger",onClick:I=>W(t.row)},{default:a(()=>e[24]||(e[24]=[u("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])]),_:1}),l(Z,{modelValue:g.value,"onUpdate:modelValue":e[13]||(e[13]=t=>g.value=t),title:o.id?"编辑标记":"添加标记",width:"600px","destroy-on-close":""},{footer:a(()=>[d("span",we,[l(n,{onClick:e[12]||(e[12]=t=>g.value=!1)},{default:a(()=>e[30]||(e[30]=[u("取消")])),_:1}),l(n,{type:"primary",onClick:H},{default:a(()=>e[31]||(e[31]=[u("确定")])),_:1})])]),default:a(()=>[l(Y,{ref_key:"formRef",ref:T,model:o,rules:O,"label-width":"100px"},{default:a(()=>[l(y,{label:"标记名称",prop:"name"},{default:a(()=>[l(b,{modelValue:o.name,"onUpdate:modelValue":e[5]||(e[5]=t=>o.name=t),placeholder:"请输入标记名称"},null,8,["modelValue"])]),_:1}),l(y,{label:"标记类型",prop:"type"},{default:a(()=>[l(x,{modelValue:o.type,"onUpdate:modelValue":e[6]||(e[6]=t=>o.type=t),placeholder:"请选择标记类型",style:{width:"100%"}},{default:a(()=>[(v(),c(F,null,j(_,t=>l(i,{key:t.value,label:t.label,value:t.value},null,8,["label","value"])),64))]),_:1},8,["modelValue"])]),_:1}),l(y,{label:"地址",prop:"address"},{default:a(()=>[l(b,{modelValue:o.address,"onUpdate:modelValue":e[7]||(e[7]=t=>o.address=t),placeholder:"请输入地址"},null,8,["modelValue"])]),_:1}),l(y,{label:"坐标"},{default:a(()=>[d("div",Ve,[l(b,{modelValue:o.latitude,"onUpdate:modelValue":e[8]||(e[8]=t=>o.latitude=t),placeholder:"纬度",class:"coordinate-input"},{prepend:a(()=>e[25]||(e[25]=[u("纬度")])),_:1},8,["modelValue"]),l(b,{modelValue:o.longitude,"onUpdate:modelValue":e[9]||(e[9]=t=>o.longitude=t),placeholder:"经度",class:"coordinate-input"},{prepend:a(()=>e[26]||(e[26]=[u("经度")])),_:1},8,["modelValue"])])]),_:1}),l(y,{label:"描述",prop:"description"},{default:a(()=>[l(b,{modelValue:o.description,"onUpdate:modelValue":e[10]||(e[10]=t=>o.description=t),type:"textarea",rows:3,placeholder:"请输入标记描述"},null,8,["modelValue"])]),_:1}),l(y,{label:"状态",prop:"status"},{default:a(()=>[l(X,{modelValue:o.status,"onUpdate:modelValue":e[11]||(e[11]=t=>o.status=t)},{default:a(()=>[l(E,{value:"approved"},{default:a(()=>e[27]||(e[27]=[u("已审核")])),_:1}),l(E,{value:"pending"},{default:a(()=>e[28]||(e[28]=[u("待审核")])),_:1}),l(E,{value:"rejected"},{default:a(()=>e[29]||(e[29]=[u("已拒绝")])),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1},8,["model"])]),_:1},8,["modelValue","title"])])}}},Ne=ee(ke,[["__scopeId","data-v-fd753644"]]);export{Ne as default};
