import{r as _,v as G,A as H,b as K,d as g,e as t,w as n,g as s,u as O,D as Q,o as h,p as r,J as W,i as x,t as X,f as z,E as B,s as S}from"./index-BZUGXbIj.js";import{_ as Y}from"./_plugin-vue_export-helper-DlAUqK2U.js";const Z={class:"posts-container"},ee={class:"page-header"},te={class:"page-header-actions"},le={class:"pagination-container"},ne={__name:"list",setup(oe){const $=O(),b=_(!1),m=_(1),C=_(10),w=_(0),i=G({content:"",author:"",status:""}),d=_([{id:1,title:"我家狗狗今天好可爱",content:"今天带我家金毛出去玩，它特别开心，还交到了新朋友...",author:"狗狗爱好者",createTime:"2023-10-15 09:30:45",viewCount:235,likeCount:42,commentCount:15,status:"published"},{id:2,title:"求推荐宠物医院",content:"我家猫咪最近食欲不太好，有没有推荐的宠物医院？最好是在朝阳区附近...",author:"猫咪妈妈",createTime:"2023-10-16 14:22:30",viewCount:187,likeCount:28,commentCount:23,status:"published"},{id:3,title:"新发现的宠物公园太棒了",content:"今天带狗狗去了新开的宠物公园，环境非常好，设施很完善...",author:"遛狗达人",createTime:"2023-10-17 16:45:12",viewCount:145,likeCount:36,commentCount:8,status:"pending"}]);H(()=>{c()});const c=()=>{b.value=!0,setTimeout(()=>{w.value=d.value.length,b.value=!1},500)},D=o=>{switch(o){case"published":return"success";case"pending":return"warning";case"disabled":return"danger";default:return"info"}},U=o=>{switch(o){case"published":return"已发布";case"pending":return"待审核";case"disabled":return"已禁用";default:return"未知"}},v=()=>{m.value=1,c()},E=()=>{i.content="",i.author="",i.status="",m.value=1,c()},I=o=>{$.push(`/posts/detail/${o.id}`)},N=()=>{c()},V=(o,e)=>{const a=e==="published"?"发布":"禁用";B.confirm(`确定要${a}该帖子吗？`,"提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:e==="published"?"success":"warning"}).then(()=>{const f=d.value.findIndex(p=>p.id===o.id);f!==-1&&(d.value[f].status=e),S.success(`帖子已${a}`)}).catch(()=>{})},P=o=>{B.confirm("确定要删除该帖子吗？删除后无法恢复","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(()=>{const e=d.value.findIndex(a=>a.id===o.id);e!==-1&&(d.value.splice(e,1),w.value--),S.success("帖子已删除")}).catch(()=>{})},F=o=>{C.value=o,c()},M=o=>{m.value=o,c()};return(o,e)=>{const a=s("el-button"),f=s("el-input"),p=s("el-form-item"),k=s("el-option"),R=s("el-select"),j=s("el-form"),T=s("el-card"),u=s("el-table-column"),A=s("el-tag"),J=s("el-table"),L=s("el-pagination"),q=Q("loading");return h(),K("div",Z,[g("div",ee,[e[6]||(e[6]=g("h2",null,"社区帖子管理",-1)),g("div",te,[t(a,{type:"primary",onClick:N},{default:n(()=>e[5]||(e[5]=[r("刷新数据")])),_:1})])]),t(T,{shadow:"hover",class:"filter-card"},{default:n(()=>[t(j,{inline:!0,model:i,class:"filter-form"},{default:n(()=>[t(p,{label:"内容关键词"},{default:n(()=>[t(f,{modelValue:i.content,"onUpdate:modelValue":e[0]||(e[0]=l=>i.content=l),placeholder:"搜索帖子内容",clearable:"",onClear:v},null,8,["modelValue"])]),_:1}),t(p,{label:"作者"},{default:n(()=>[t(f,{modelValue:i.author,"onUpdate:modelValue":e[1]||(e[1]=l=>i.author=l),placeholder:"输入作者昵称",clearable:"",onClear:v},null,8,["modelValue"])]),_:1}),t(p,{label:"状态"},{default:n(()=>[t(R,{modelValue:i.status,"onUpdate:modelValue":e[2]||(e[2]=l=>i.status=l),placeholder:"选择状态",clearable:"",onChange:v},{default:n(()=>[t(k,{label:"已发布",value:"published"}),t(k,{label:"待审核",value:"pending"}),t(k,{label:"已禁用",value:"disabled"})]),_:1},8,["modelValue"])]),_:1}),t(p,null,{default:n(()=>[t(a,{type:"primary",onClick:v},{default:n(()=>e[7]||(e[7]=[r("查询")])),_:1}),t(a,{onClick:E},{default:n(()=>e[8]||(e[8]=[r("重置")])),_:1})]),_:1})]),_:1},8,["model"])]),_:1}),t(T,{shadow:"hover",class:"posts-card"},{default:n(()=>[W((h(),x(J,{data:d.value,style:{width:"100%"}},{default:n(()=>[t(u,{prop:"id",label:"ID",width:"80"}),t(u,{prop:"title",label:"标题","min-width":"150","show-overflow-tooltip":""}),t(u,{prop:"author",label:"作者",width:"120"}),t(u,{prop:"createTime",label:"发布时间",width:"180"}),t(u,{prop:"viewCount",label:"浏览量",width:"100"}),t(u,{prop:"likeCount",label:"点赞数",width:"100"}),t(u,{prop:"commentCount",label:"评论数",width:"100"}),t(u,{label:"状态",width:"100"},{default:n(l=>[t(A,{type:D(l.row.status)},{default:n(()=>[r(X(U(l.row.status)),1)]),_:2},1032,["type"])]),_:1}),t(u,{label:"操作",width:"250",fixed:"right"},{default:n(l=>[t(a,{size:"small",type:"primary",onClick:y=>I(l.row)},{default:n(()=>e[9]||(e[9]=[r("查看")])),_:2},1032,["onClick"]),l.row.status!=="published"?(h(),x(a,{key:0,size:"small",type:"success",onClick:y=>V(l.row,"published")},{default:n(()=>e[10]||(e[10]=[r("发布")])),_:2},1032,["onClick"])):z("",!0),l.row.status!=="disabled"?(h(),x(a,{key:1,size:"small",type:"danger",onClick:y=>V(l.row,"disabled")},{default:n(()=>e[11]||(e[11]=[r("禁用")])),_:2},1032,["onClick"])):z("",!0),t(a,{size:"small",type:"danger",onClick:y=>P(l.row)},{default:n(()=>e[12]||(e[12]=[r("删除")])),_:2},1032,["onClick"])]),_:1})]),_:1},8,["data"])),[[q,b.value]]),g("div",le,[t(L,{"current-page":m.value,"onUpdate:currentPage":e[3]||(e[3]=l=>m.value=l),"page-size":C.value,"onUpdate:pageSize":e[4]||(e[4]=l=>C.value=l),"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",total:w.value,onSizeChange:F,onCurrentChange:M},null,8,["current-page","page-size","total"])])]),_:1})])}}},ie=Y(ne,[["__scopeId","data-v-cd636ff0"]]);export{ie as default};
